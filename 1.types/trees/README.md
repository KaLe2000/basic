# Деревья

### Binary Tree / Бинарное дерево
Бинарное дерево или двоичное дерево — это дерево, в котором у каждого из его узлов не более двух дочерних узлов. При этом каждый дочерний узел тоже представляет собой бинарное дерево.

#### Binary Search Tree / Бинарное дерево поиска
Бинарное дерево поиска (BST) — это бинарное дерево, обладающее дополнительными свойствами: значение левого потомка меньше значения родителя, а значение правого потомка больше значения родителя для каждого узла дерева. То есть, данные в бинарном дереве поиска хранятся в отсортированном виде. При каждой операции вставки нового или удаления существующего узла отсортированный порядок дерева сохраняется. При поиске элемента сравнивается искомое значение с корнем. Если искомое больше корня, то поиск продолжается в правом потомке корня, если меньше, то в левом, если равно, то значение найдено и поиск прекращается.

В базах данных индексы часто строятся с использованием сбалансированных деревьев поиска, таких как AVL-деревья или красно-черные деревья, которые являются улучшенными версиями обычного BST.

#### AVL Tree / Самобалансирующееся бинарное дерево поиска
AVL-дерево (Adelson-Velsky and Landis Tree) — это самобалансирующееся бинарное дерево поиска, в котором для каждого узла выполняется условие: разница между высотами левого и правого поддерева не может быть больше 1. Это условие обеспечивает балансировку дерева, что позволяет выполнять операции поиска, вставки и удаления за время O(log n).

В качестве индикатора наличия разбалансированности в поддереве на узел выносят показатель баланса, который принимает значения от -1 до +1. Их значения:
- –1 — в правом поддереве больше высота
- 0 — поддеревья равной высоты
- +1 — высота больше в левом поддереве

Когда AVL-дерево нарушает баланс, оно выполняет вращения для восстановления баланса. Всего существует четыре типа вращений:
1. Левое вращение (Left Rotation)
2. Правое вращение (Right Rotation)
3. Левое-правое вращение (Left-Right Rotation)
4. Правое-левое вращение (Right-Left Rotation)


Применение в базах данных

- Индексация: AVL-деревья часто используются для создания индексов в базах данных, так как они обеспечивают быстрый поиск, вставку и удаление записей с гарантированной логарифмической сложностью.
- Динамическое обновление: AVL-деревья позволяют эффективно обновлять индекс, добавляя или удаляя записи без значительного ухудшения производительности.


Пример использования AVL-деревьев для индексации

Допустим, мы хотим использовать AVL-дерево для индексации данных в базе данных. Каждый узел будет хранить уникальный идентификатор пользователя, и мы будем использовать AVL-дерево для обеспечения эффективного поиска.

Каждый узел будет хранить:
- ключ (идентификатор пользователя),
- указатели на левого и правого ребенка,
- высоту поддерева (необходима для балансировки дерева).

Для вставки элемента мы сначала вставляем его как в обычное бинарное дерево поиска, а затем выполняем балансировку.
Чтобы поддерживать баланс в AVL-дереве, необходимо выполнить повороты при вставке или удалении узлов. Баланс вычисляется как разница между высотами левого и правого поддерева (фактор баланса).